<header id="header" class="d-flex align-items-center" style="margin-bottom: -30px;">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-between" style="margin-left: -10px;">
        <a href="home" class="image d-flex align-items-center">
          <img class="logocompany"/>
        </a>
        <a class="nav-item" href="inicio" (click)="logOut()" style="margin-bottom: 59px;">Salir</a>
    </div>

</header>
<!-- <div class="ml-5" style="width: 92%;">
    <div class="row mt-5" *ngIf="alert.show">
        <div class="col-sm-12 col-md-6 mx-auto">
            <ngb-alert *ngIf="alert.show" [type]="alert.type" (close)="alert.show = false;">{{ alert.message | translate }}</ngb-alert>
        </div>
    </div>-->
<form [formGroup]="financing_form">
  <div class="card-propietary ml-4">
    <div class="title">
        <p class="title-text">
            Información del Propietario
        </p>
    </div>
    <div class="data">
      <div class="range">
          <div class="fill" style="margin-top: -15px;">
          </div>
      </div>

        <div class="row">
          <div class="col-lg-3">
              <div class="form-outline">
                  <strong class="form-label" for="form3Examplev5">Propietarios</strong>
                  <div >
                  <ng-autocomplete  [data]="propietaryList" [searchKeyword]="keyword" 
                                  placeholder="Seleccionar Propietario" (selected)='getSearchVehicle($event)'
                                  [itemTemplate]="itemTemplate" [notFoundTemplate]="notFoundTemplate">                                 
                  </ng-autocomplete>
              
                  <ng-template #itemTemplate let-item >
                      <a [innerHTML]="item.value"></a>
                  </ng-template>
              
                  <ng-template #notFoundTemplate let-notFound  >
                      <div [innerHTML]="notFound"></div>
                  </ng-template>
                </div>
              </div>
          </div> 
          <div class="col-lg-3">
            <div class="form-outline">
                <strong class="form-label" for="form3Examplev5">Vehículo del Propietario</strong>
                <div >
                <ng-autocomplete  [data]="vehiclePropietaryList" [searchKeyword]="keyword" 
                                placeholder="Seleccionar Vehiculo" (selected)='getSearchInfoPropietary($event)'
                                [itemTemplate]="itemTemplate" [notFoundTemplate]="notFoundTemplate">                                 
                </ng-autocomplete>
            
                <ng-template #itemTemplate let-item >
                    <a [innerHTML]="item.value"></a>
                </ng-template>
            
                <ng-template #notFoundTemplate let-notFound  >
                    <div [innerHTML]="notFound"></div>
                </ng-template>
              </div>    
            </div>
          </div> 
          <div class="col-lg-2">
              <div class="form-outline form-white">
                <strong class="form-label required" for="form3Examplea8">Identificación</strong>
                <p class="mt-3">{{documento}}</p>
              </div>
          </div>
          <div class="col-lg-2">
              <div class="form-outline form-white">
                <strong class="form-label required" for="form3Examplea8">Teléfono</strong>
                  <p class="mt-3">{{telefono}}</p>
              </div>
          </div>
          <div class="col-lg-2">
              <div class="form-outline form-white">
                <strong class="form-label required" for="form3Examplea8">Correo</strong>
                  <p class="mt-3 text-lowercase">{{correo}}</p>
              </div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-lg-3">
              <div class="form-outline form-white">
                <strong class="form-label required" for="form3Examplea8">Modelo - Versión</strong>
                  <p class="mt-3 text-lowercase">{{detallecarro}}</p>
              </div>
          </div>


          <div class="col-lg-3">
            <div class="form-outline">
                <strong class="form-label" for="form3Examplev5">Estado</strong>
                <div >
                <ng-autocomplete  
                    [data]="stateList" 
                    [searchKeyword]="keyword" 

                    placeholder="Seleccionar Estado"
                    formControlName="cestado"
                    [itemTemplate]="itemTemplate" 
                    [notFoundTemplate]="notFoundTemplate">                                 
                </ng-autocomplete>
            
                <ng-template #itemTemplate let-item >
                    <a [innerHTML]="item.value"></a>
                </ng-template>
            
                <ng-template #notFoundTemplate let-notFound  >
                    <div [innerHTML]="notFound"></div>
                </ng-template>
              </div>
            </div>
          </div>

          <div class="col-lg-3">
            <div class="form-outline">
                <strong class="form-label" for="form3Examplev5">Servicio</strong>
                <div >
                <ng-autocomplete  
                  [data]="serviceList"
                  [searchKeyword]="keyword" 
                  placeholder="Seleccionar Servicio" 

                  (selected)='getReplacement($event)'
                  [itemTemplate]="itemTemplate" [notFoundTemplate]="notFoundTemplate">                                 
                </ng-autocomplete>
            
                <ng-template #itemTemplate let-item >
                    <a [innerHTML]="item.value"></a>
                </ng-template>
            
                <ng-template #notFoundTemplate let-notFound  >
                    <div [innerHTML]="notFound"></div>
                </ng-template>
              </div>
            </div>
          </div>

          <!-- <div class="image-container"></div> -->
        </div>
    </div>
  </div>
  <div class=" ml-2">
      <div class="card" style="--bs-gutter-x: 2.8rem; margin-top: 15px;" *ngIf="activeProviders">
        <div class="row ">

          <div class="card-error container registration-form" *ngIf="activateError">
              <a class="card1">
              <p>Error</p>
              <p class="small">{{this.errorMessage}}</p>
              <div class="go-corner">
                <div class="go-arrow">
                  →
                </div>
              </div>
            </a>
          </div>
          <div class="loader container registration-form" *ngIf="activateLoader"></div>

          <div formArrayName="proveedores" class="col-lg-8" >
            <p class="title">Lista de Proveedores</p>
            <table class="table-responsive" style="--bs-gutter-x: 2.8rem; margin-top: 15px;" *ngIf="providerList && providerList.length > 0">
              <thead class="thead-light"> 
                <tr>
                  <th scope="col">Proveedor</th>
                  <th scope="col">Teléfono</th>

                  <th scope="col"  *ngIf="replacement" >Repuestos</th>
                  <th scope="col"  *ngIf="replacement">Cantidad</th>
                  <th scope="col">Precio</th>
                  <th scope="col"></th>
                </tr>
              </thead>
              <tbody *ngFor="let creds of proveedores.controls; let i=index">
                <tr  [formGroupName]="i">

                  <td>{{ creds.value.xproveedor }}</td>

                  <td>{{ creds.value.xtelefono }}</td>


                  <td *ngIf="replacement">
    
                          <div >
                          <ng-autocomplete  
                          [data]="replacementList" 
                          [searchKeyword]="keyword" 
                          formControlName="crepuesto"
                          placeholder="Seleccionar Repuesto" 
                          [itemTemplate]="itemTemplate" 
                          [notFoundTemplate]="notFoundTemplate">                                 
                          </ng-autocomplete>
                      
                          <ng-template #itemTemplate let-item >
                              <a [innerHTML]="item.value"></a>
                          </ng-template>
                      
                          <ng-template #notFoundTemplate let-notFound  >
                              <div [innerHTML]="notFound"></div>
                          </ng-template>
                        </div>

                  </td>

                  <td class="items" *ngIf="replacement">
                    <input type="number" formControlName="cantidad" class="form-control form-control-alternative" />
                  </td>

                  <td class="items">
                    <input type="number" formControlName="monto" class="form-control form-control-alternative" />
                  </td>

                  <td><button class="follow" (click)="addpprovider(i)">Seleccionar</button></td>
                </tr>
              </tbody>
            </table>
          </div>

          <div formArrayName="proveedores_seleccionados" class="col-lg-4" >
            <p class="title">Lista de Proveedores seleccionados</p>
            <table class="table-responsive" style="--bs-gutter-x: 2.8rem; margin-top: 15px;" *ngIf="providerList && providerList.length > 0">
              <thead class="thead-light"> 
                <tr>
                  <th scope="col">Proveedor</th>
                  <th scope="col">Teléfono</th>

                  <th scope="col"  *ngIf="replacement" >Repuestos</th>
                  <th scope="col"  *ngIf="replacement">Cantidad</th>
                  <th scope="col">Precio</th>
                  <th scope="col"></th>
                </tr>
              </thead>
              <tbody *ngFor="let creds of proveedores_seleccionados.controls; let i=index">
                <tr  [formGroupName]="i">

                  <td>{{ creds.value.xproveedor }}</td>

                  <td>{{ creds.value.xtelefono }}</td>


                  <td *ngIf="replacement">
    
                    {{ creds.value.xrepuesto }}

                  </td>

                  <td class="items" *ngIf="replacement">
                    {{ creds.value.cantidad }}
                  </td>

                  <td class="items">
                    {{ creds.value.monto }}
                  </td>

                  <td><button class="follow" (click)="removeprovider(i)">Eliminar</button></td>
                </tr>
              </tbody>
            </table>

            <div class="mt-1 col-4" style="margin-left: auto;">
              <div class="pricingTable ">
                <div class="pricing_heading">
                    <h3 class="title"></h3>
                    <span class="value">
                      Financiar {{Mountfinancing}} $
                      Total {{ sumofamounts}}
                    </span>
                </div>
                <div class="content">
                    <ul>
                        <li>Lorem ipsum</li>
                        <li>Lorem ipsum</li>
                        <li>Lorem ipsum</li>
                        <li>Lorem ipsum</li>
                        <li>Lorem ipsum</li>
                    </ul>
                    <div class="link">
                        <a href="#">sign up</a>
                    </div>
                </div>
              </div>
            </div>
          </div>
          <!-- <div style="display: grid;place-items: center;margin-top: 27px;">
            <ngb-pagination [(page)]="currentPage" [pageSize]="itemsPerPage" [collectionSize]="providerList.length" [maxSize]="5" [rotate]="true"></ngb-pagination>
          </div> -->

        </div>
      </div>
  </div>


</form>
<app-footer></app-footer>